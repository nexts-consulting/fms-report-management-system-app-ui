# ğŸ¨ Visual Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            PARENT APPLICATION                                    â”‚
â”‚                         (Main App - Same Domain)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   User Access    â”‚â”€â”€â”€â”€â”€â”€â–¶  â”‚   Form Page      â”‚â”€â”€â”€â”€â”€â”€â–¶  â”‚  Load Form Def  â”‚â”‚
â”‚  â”‚  /form/[id]      â”‚         â”‚   [form_id]      â”‚         â”‚   from Store    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                        â”‚                             â”‚          â”‚
â”‚                                        â”‚                             â–¼          â”‚
â”‚                                        â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                                        â”‚                    â”‚  Not in Store?  â”‚â”‚
â”‚                                        â”‚                    â”‚  Call API       â”‚â”‚
â”‚                                        â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                        â”‚                             â”‚          â”‚
â”‚                                        â–¼                             â–¼          â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                               â”‚  Get Attendance  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Supabase DB   â”‚â”‚
â”‚                               â”‚  from localStorageâ”‚         â”‚  fms_mst_form   â”‚â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                        â”‚                                        â”‚
â”‚                                        â–¼                                        â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                               â”‚ IframeFormViewer â”‚                            â”‚
â”‚                               â”‚   Component      â”‚                            â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                        â”‚                                        â”‚
â”‚                                        â”‚ Render iframe                          â”‚
â”‚                                        â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                           IFRAME CONTAINER                                â”‚â”‚
â”‚  â”‚                                                                           â”‚â”‚
â”‚  â”‚  Loading Overlay â”€â”€â”€â”€â–¶ Iframe Loads â”€â”€â”€â”€â–¶ onLoad Event                  â”‚â”‚
â”‚  â”‚                                                                           â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚                    postMessage Communication                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚â”‚
â”‚  â”‚  â”‚   Parent                                    Child Form              â”‚ â”‚â”‚
â”‚  â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚â”‚
â”‚  â”‚  â”‚   â”‚              â”‚â”€â”€â”€â”€ FORM_READY â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚       â”‚ â”‚â”‚
â”‚  â”‚  â”‚   â”‚              â”‚                         â”‚              â”‚       â”‚ â”‚â”‚
â”‚  â”‚  â”‚   â”‚  Parent App  â”‚â—€â”€â”€â”€ INIT_FORM_DATA â”€â”€â”€â”€â”‚  Child Form  â”‚       â”‚ â”‚â”‚
â”‚  â”‚  â”‚   â”‚              â”‚   (currentAttendance)   â”‚              â”‚       â”‚ â”‚â”‚
â”‚  â”‚  â”‚   â”‚              â”‚                         â”‚              â”‚       â”‚ â”‚â”‚
â”‚  â”‚  â”‚   â”‚              â”‚â—€â”€â”€â”€ FORM_SUBMITTED â”€â”€â”€â”€â”‚              â”‚       â”‚ â”‚â”‚
â”‚  â”‚  â”‚   â”‚              â”‚     (optional)          â”‚              â”‚       â”‚ â”‚â”‚
â”‚  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                                           â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚                     CHILD FORM (Iframe)                           â”‚  â”‚â”‚
â”‚  â”‚  â”‚                   (Different Domain)                              â”‚  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚â”‚
â”‚  â”‚  â”‚                                                                   â”‚  â”‚â”‚
â”‚  â”‚  â”‚  1. Receive INIT_FORM_DATA message                              â”‚  â”‚â”‚
â”‚  â”‚  â”‚  2. Extract currentAttendance                                    â”‚  â”‚â”‚
â”‚  â”‚  â”‚  3. Display attendance info                                      â”‚  â”‚â”‚
â”‚  â”‚  â”‚  4. User fills form                                              â”‚  â”‚â”‚
â”‚  â”‚  â”‚  5. Submit directly to database                                  â”‚  â”‚â”‚
â”‚  â”‚  â”‚  6. (Optional) Send FORM_SUBMITTED back                          â”‚  â”‚â”‚
â”‚  â”‚  â”‚                                                                   â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                 â”‚
â”‚  Error Handling:                                                               â”‚
â”‚  â€¢ Loading timeout (15s) â†’ Show error + retry button                          â”‚
â”‚  â€¢ Missing app_url â†’ Show configuration error                                 â”‚
â”‚  â€¢ API error â†’ Show error message                                             â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Diagram

```
     User Action                Parent App                    Child Form
         â”‚                          â”‚                             â”‚
         â”‚                          â”‚                             â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                     â”‚                             â”‚
    â”‚ Navigateâ”‚                     â”‚                             â”‚
    â”‚ to form â”‚                     â”‚                             â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚                             â”‚
         â”‚                          â”‚                             â”‚
         â”‚    Load Request          â”‚                             â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                             â”‚
         â”‚                          â”‚                             â”‚
         â”‚                          â”œâ”€â”€â”                          â”‚
         â”‚                          â”‚  â”‚ 1. Get form definition   â”‚
         â”‚                          â”‚  â”‚    from store/API        â”‚
         â”‚                          â”‚â—€â”€â”˜                          â”‚
         â”‚                          â”‚                             â”‚
         â”‚                          â”œâ”€â”€â”                          â”‚
         â”‚                          â”‚  â”‚ 2. Get currentAttendance â”‚
         â”‚                          â”‚  â”‚    from localStorage     â”‚
         â”‚                          â”‚â—€â”€â”˜                          â”‚
         â”‚                          â”‚                             â”‚
         â”‚                          â”œâ”€â”€â”                          â”‚
         â”‚                          â”‚  â”‚ 3. Render iframe         â”‚
         â”‚                          â”‚â—€â”€â”˜                          â”‚
         â”‚                          â”‚                             â”‚
         â”‚                          â”‚         Iframe Load         â”‚
         â”‚                          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
         â”‚                          â”‚                             â”‚
         â”‚                          â”‚                             â”œâ”€â”€â”
         â”‚                          â”‚                             â”‚  â”‚ 4. Initialize
         â”‚                          â”‚                             â”‚â—€â”€â”˜
         â”‚                          â”‚                             â”‚
         â”‚                          â”‚      â—€â”€â”€â”€ FORM_READY       â”‚
         â”‚                          â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                          â”‚                             â”‚
         â”‚                          â”œâ”€â”€â”                          â”‚
         â”‚                          â”‚  â”‚ 5. Prepare data          â”‚
         â”‚                          â”‚â—€â”€â”˜                          â”‚
         â”‚                          â”‚                             â”‚
         â”‚                          â”‚   INIT_FORM_DATA â”€â”€â”€â–¶       â”‚
         â”‚                          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
         â”‚                          â”‚   (currentAttendance)       â”‚
         â”‚                          â”‚                             â”‚
         â”‚                          â”‚                             â”œâ”€â”€â”
         â”‚                          â”‚                             â”‚  â”‚ 6. Display data
         â”‚                          â”‚                             â”‚â—€â”€â”˜
         â”‚                          â”‚                             â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                     â”‚                        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚  User   â”‚                     â”‚                        â”‚  Form   â”‚
    â”‚  Fills  â”‚                     â”‚                        â”‚ Ready   â”‚
    â”‚  Form   â”‚                     â”‚                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚                             â”‚
         â”‚                          â”‚                             â”‚
         â”‚                          â”‚                        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
         â”‚                          â”‚                        â”‚  User   â”‚
         â”‚                          â”‚                        â”‚ Submits â”‚
         â”‚                          â”‚                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                          â”‚                             â”‚
         â”‚                          â”‚                             â”œâ”€â”€â”
         â”‚                          â”‚                             â”‚  â”‚ 7. Save to DB
         â”‚                          â”‚                             â”‚â—€â”€â”˜
         â”‚                          â”‚                             â”‚
         â”‚                          â”‚   â—€â”€â”€â”€ FORM_SUBMITTED      â”‚
         â”‚                          â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                          â”‚        (optional)           â”‚
         â”‚                          â”‚                             â”‚
         â”‚                          â”œâ”€â”€â”                          â”‚
         â”‚                          â”‚  â”‚ 8. Handle response       â”‚
         â”‚                          â”‚â—€â”€â”˜                          â”‚
         â”‚                          â”‚                             â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                     â”‚                        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ Success â”‚                     â”‚                        â”‚ Success â”‚
    â”‚ Message â”‚                     â”‚                        â”‚ Message â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SECURITY MEASURES                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Parent Side:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  1. Database Validation                                       â”‚ â”‚
â”‚  â”‚     âœ“ Verify form_id exists                                  â”‚ â”‚
â”‚  â”‚     âœ“ Check form status (published)                          â”‚ â”‚
â”‚  â”‚     âœ“ Validate app_url format                                â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  2. Origin Extraction                                         â”‚ â”‚
â”‚  â”‚     âœ“ Extract origin from app_url                            â”‚ â”‚
â”‚  â”‚     âœ“ Use for postMessage targetOrigin                       â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  3. Iframe Sandbox                                            â”‚ â”‚
â”‚  â”‚     âœ“ allow-same-origin                                      â”‚ â”‚
â”‚  â”‚     âœ“ allow-scripts                                          â”‚ â”‚
â”‚  â”‚     âœ“ allow-forms                                            â”‚ â”‚
â”‚  â”‚     âœ“ allow-popups (limited)                                 â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  4. Timeout Protection                                        â”‚ â”‚
â”‚  â”‚     âœ“ 15 second timeout                                      â”‚ â”‚
â”‚  â”‚     âœ“ Prevent indefinite loading                             â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  Child Side:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  1. Origin Validation                                         â”‚ â”‚
â”‚  â”‚     const allowedOrigins = [                                 â”‚ â”‚
â”‚  â”‚       'https://parent-app.com',                              â”‚ â”‚
â”‚  â”‚       'http://localhost:3000'  // Dev only                   â”‚ â”‚
â”‚  â”‚     ];                                                        â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚     if (!allowedOrigins.includes(event.origin)) {            â”‚ â”‚
â”‚  â”‚       return; // Reject message                              â”‚ â”‚
â”‚  â”‚     }                                                         â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  2. Data Validation                                           â”‚ â”‚
â”‚  â”‚     âœ“ Check message type                                     â”‚ â”‚
â”‚  â”‚     âœ“ Validate data structure                                â”‚ â”‚
â”‚  â”‚     âœ“ Sanitize user inputs                                   â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  3. HTTPS in Production                                       â”‚ â”‚
â”‚  â”‚     âœ“ Enforce HTTPS                                          â”‚ â”‚
â”‚  â”‚     âœ“ No sensitive data in URLs                              â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COMPONENT LAYERS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                   Presentation Layer                        â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚â”‚
â”‚  â”‚  â”‚   Form Page       â”‚â”€â”€â”€â”€â”€â”€â”‚ IframeFormViewer â”‚          â”‚â”‚
â”‚  â”‚  â”‚   [form_id]       â”‚      â”‚    Component     â”‚          â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚â”‚
â”‚  â”‚           â”‚                           â”‚                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚              â”‚                           â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚           â”‚      Hook Layer           â”‚                    â”‚â”‚
â”‚  â”‚           â”‚                           â”‚                    â”‚â”‚
â”‚  â”‚           â–¼                           â–¼                    â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚â”‚
â”‚  â”‚  â”‚ useFormDefinitionâ”‚      â”‚useIframeCommunicationâ”‚      â”‚â”‚
â”‚  â”‚  â”‚      Hook        â”‚      â”‚        Hook          â”‚      â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚â”‚
â”‚  â”‚           â”‚                           â”‚                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚              â”‚                           â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚           â”‚     Context Layer         â”‚                    â”‚â”‚
â”‚  â”‚           â”‚                           â”‚                    â”‚â”‚
â”‚  â”‚           â–¼                           â”‚                    â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                    â”‚â”‚
â”‚  â”‚  â”‚FormDefinitionContext   â”‚          â”‚                    â”‚â”‚
â”‚  â”‚  â”‚  & GlobalContext       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚â”‚
â”‚  â”‚           â”‚                                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚              â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚           â”‚       Store Layer                              â”‚â”‚
â”‚  â”‚           â”‚                                                â”‚â”‚
â”‚  â”‚           â–¼                                                â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚â”‚
â”‚  â”‚  â”‚FormDefinitionStore â”‚      â”‚   GlobalStore    â”‚        â”‚â”‚
â”‚  â”‚  â”‚    (Zustand)       â”‚      â”‚   (Zustand)      â”‚        â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚â”‚
â”‚  â”‚           â”‚                           â”‚                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚              â”‚                           â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚           â”‚      Data Layer           â”‚                   â”‚â”‚
â”‚  â”‚           â”‚                           â”‚                   â”‚â”‚
â”‚  â”‚           â–¼                           â–¼                   â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚â”‚
â”‚  â”‚  â”‚  Supabase API   â”‚      â”‚   localStorage     â”‚        â”‚â”‚
â”‚  â”‚  â”‚ fms_mst_form    â”‚      â”‚  global-storage    â”‚        â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚â”‚
â”‚  â”‚                                                           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Visual diagrams created to help understand the system architecture!** ğŸ¨

